{% include 'header.html' %}

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">plant.MAP</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="/">Home</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/download">Download</a></li>

          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container theme-showcase" role="main">

{% include 'jumbotron.html' %}

      <div class="page-header">
        <h3>Search for a protein or orthogroup</h3>
      </div>



    <h3><b> Search term did not uniquely identify a protein. Please select from matches below.</b>Rarely, an <i>Arabidopsis</i> genename or TAIR AT locus will map to multiple uniprot proteins, and also match multiple ortholog groups.</h3>

	    <!-- https://www.uniprt.org/uniprot/?query=I1KDU3+OR+I1M368+OR+I1M369+OR+I1M370+OR+K7KX13&sort=score -->
	    <table class="table table-striped">
		 <thead>
		 <tr>
		 <th>OrthogroupID
			      <button class="btn btn-default btn-xs" onclick="orthogroupFunction()">?</button>
			      <script>
				function orthogroupFunction() {
				alert("eggNOG4.0 virNOG (viridiplantae) orthogroup identifier http://eggnogdb.embl.de");
				}
			      </script></th>
                 <th> Text match </th>
			<th>Orthogroup Annotation
			      <button class="btn btn-default btn-xs" onclick="orthoannotFunction()">?</button>
			      <script>
				function orthoannotFunction() {
				alert("Autogenerated by eggNOG http://eggnogdb.embl.de");
				}
			      </script></th>
			<th>Arabidopsis Gene Name(s)</th>
			<th>Species
			      <button class="btn btn-default btn-xs" onclick="specFunction()">?</button>
			      <script>
				function specFunction() {
				alert("Species codes:\narath : Arabidopsis\nbraol : Broccoli\nchlre : Chlamydomonas\ncocnu : Coconut\ncansa : Hemp\nsollc : Tomato\nmaize : Maize\nchqui : Quinoa\norysj : Rice\nsoybn : Soy\nselml : Spikemoss\nwheat : Wheat\ncerri : C-Fern");
				}
			      </script></th>
			<th>Protein ID(s)
			      <button class="btn btn-default btn-xs" onclick="protFunction()">?</button>
			      <script>
				function protFunction() {
				alert("Proteins in selected species contained in ortholog group (i.e. duplications since last common plant ancestor");
				}
			      </script></th>
			<th>TAIR Link(s)</th>
			<th>Uniprot Link</th>
		    </tr>
		</thead>
		<tbody>
 		    {% for prot in prots %}
                     <tr>
      			 <td>
                         <form method="POST" action="/search">
                             {{ form.csrf_token() }}
                             {{ form.OrthogroupID(value = prot.orthogroups.OrthogroupID, type = "hidden") }}
                             
                             {{ form.submit(value = prot.orthogroups.OrthogroupID)  }}
                         </form>
                         </td>

			 <td>{{ prot.ProteinID }}</td>
			 <td>{% for x in prot.orthogroups.Orthoannots %}
                             {{ x.EggnogAnnot }}
                        {% endfor %} </td>

                    <td>{% for x in prot.orthogroups.Orthoannots %}
                             {{ x.ArathGenenames }}
                        {% endfor %} </td>



                        {% set entrylist = [] %}
                        {% set entrynamelist = [] %}
                        {% set tairlist = [] %}
 


                        {% for x in prot.orthogroups.Proteins %}
                           
                           {% if x.Spec == "arath" %}
                              {% if x.IDtype == "Entry" %}
                                 {% do entrylist.append(x.ProteinID) %}
                              {% endif %}
                              {% if x.IDtype == "EntryName" %}
                                 {% do entrynamelist.append(x.ProteinID) %}
                              {% endif %}
                           {% endif %}
                              {% if x.IDtype == "atnum" %}
                                 {% do tairlist.append(x.ProteinID) %}
                              {% endif %}


                        {% endfor %} 
                    <td>{{ prot.Spec }}</td>
                    <td>{{ entrylist | join(' ') }}</td>


                    
                    <td>{% for locus in tairlist %}
                           <a href = https://www.arabidopsis.org/servlets/TairObject?type=locus&name={{ locus }}>{{ locus }}</a>
                       {% endfor %}</td>


                    <td><a href = https://www.uniprot.org/uniprot/?query=id:{{entrylist | join("+OR+id:") }}>Uniprot</a> </td>
	 	  
 
	    {% endfor %}
            </tr>
            </tbody>
        </table>


                             </tr>


       <br>
    <!--
        <em>No complexes</em>


      -->

    </ul>





{% include 'footer.html' %}






